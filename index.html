<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Magma BITS By: MassterWorks</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
            background-image: url("Background.webp");
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
        }
        .container {
            width: 90%;
            max-width: 600px;
            margin: 50px auto;
            padding: 25px;
            border-radius: 10px;
            text-align: center;
            color: lightskyblue;
            background-color: rgba(255, 255, 255, 0.8); /* Add a semi-transparent background */
        }
        .circle-image {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            overflow: hidden;
            margin-top: -50px; /* Adjust margin-top instead of absolute positioning */
            margin-left: auto;
            margin-right: auto;
        }
        .circle-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .social-links {
            margin-top: 20px;
            text-align: center;
        }
        .social-links a {
            display: inline-block;
            margin: 0 10px;
            text-decoration: none;
            color: white;
            transition: transform 0.3s;
        }
        .social-links a:hover {
            transform: scale(1.1);
        }
        h1 {
            font-size: 25px;
            margin: 20px 0;
            color: rgb(255, 255, 255);
        }
        .connect-wallet-container {
            margin-bottom: 20px;
        }
        .connect-wallet-button,
        .disconnect-wallet-button,
        .mint-button {
            width: 100%;
            padding: 15px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 20px;
            text-decoration: none;
            transition: background-color 0.3s, color 0.3s;
            border: 2px solid white;
            margin-top: 10px;
        }
        .connect-wallet-button {
            background-color: #4caf50;
            color: white;
        }
        .disconnect-wallet-button {
            background-color: #ff0000;
            color: white;
        }
        .mint-button {
            background-color: black;
            color: white;
            border: 4px solid transparent;
            border-image: linear-gradient(to right, red, orange, darkorange);
            border-image-slice: 1;
        }
        h4 {
            color: rgb(68, 149, 243);
            margin-top: 30px;
        }
        @media screen and (max-width: 768px) {
            .circle-image {
                width: 80px;
                height: 80px;
                margin-top: -40px;
            }
        }
    </style>
    <!-- MetaMask Script -->
    <script src="https://cdn.jsdelivr.net/npm/@metamask/detect-provider"></script>
</head>
<body>
<div class="circle-image">
    <a href="https://twitter.com/MASSTERWORKS" target="_blank">
        <img src="WorkssPFP.jpg" alt="MassterWorks" />
    </a>
</div>
<div class="social-links">
    <a href="https://twitter.com/MASSTERWORKS" target="_blank">TwitterX</a>
    <a href="https://massterworks.printify.me/products" target="_blank">Merch Store</a>
    <a href="https://www.instagram.com/massterworks" target="_blank">Instagram</a>
</div>
<div class="container">
    <h1>
        <span style="font-size: smaller">ON TESTNET |</span>
        By: @MassterWorks
    </h1>
    <div class="connect-wallet-container">
        <button class="connect-wallet-button">Connect Wallet</button>
    </div>
    <div id="mint-buttons" style="display: none;">
        <button class="mint-button">Mint 1 Magma BIT</button>
        <button class="mint-button">Mint 5 Magma BITS</button>
    </div>
    <button class="disconnect-wallet-button" style="display: none;">Disconnect Wallet</button>
    <p id="wallet-address" style="display: none"></p>
    <h4>Ethereum Tip Jar: MassterWorks.eth</h4>
</div>

<script>
    const connectButton = document.querySelector(".connect-wallet-button");
    const disconnectButton = document.querySelector(".disconnect-wallet-button");
    const mintButtons = document.querySelectorAll(".mint-button");
    const walletAddress = document.getElementById("wallet-address");
    const mintButtonsContainer = document.getElementById("mint-buttons");

    // Function to handle wallet connection
    async function connectWallet() {
        try {
            // Detect MetaMask provider
            const provider = await detectEthereumProvider();

            if (provider) {
                // Request user to connect their MetaMask wallet
                await provider.request({ method: 'eth_requestAccounts' });

                // Get the selected account
                const accounts = await ethereum.request({ method: 'eth_accounts' });
                const selectedAccount = accounts[0];

                // Display connected wallet address
                walletAddress.textContent = `Connected Wallet: ${selectedAccount}`;
                walletAddress.style.display = "block";
                connectButton.style.display = "none";
                disconnectButton.style.display = "inline-block";
                mintButtonsContainer.style.display = "block";
            } else {
                // MetaMask is not installed
                alert("MetaMask extension not detected. Please install MetaMask to use this feature.");
            }
        } catch (error) {
            console.error(error);
            // Handle errors
            alert("An error occurred while connecting to MetaMask. Please try again.");
        }
    }

    // Function to handle wallet disconnection
    function disconnectWallet() {
        ethereum.request({ method: 'eth_accounts' })
            .then(accounts => {
                // Disconnect MetaMask wallet
                if (accounts.length > 0) {
                    ethereum.request({ method: 'eth_requestAccounts' });
                }
            })
            .catch(console.error);

        walletAddress.textContent = ""; // Clear wallet address
        walletAddress.style.display = "none";
        connectButton.style.display = "inline-block";
        disconnectButton.style.display = "none";
        mintButtonsContainer.style.display = "none";
        // Reload the page after disconnecting wallet
        location.reload();
    }

    // Event listeners
    connectButton.addEventListener("click", connectWallet);
    disconnectButton.addEventListener("click", disconnectWallet);
</script>
</body>
</html>
